<!--Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file 
    distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to you under 
    the Apache License, Version 2.0 (theÏ "License"); you may not use this file except in compliance with the License. You may 
    obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to 
    in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF 
    ANY ~ KIND, either express or implied. See the License for the specific language governing permissions and limitations under 
    the License. -->

<!DOCTYPE assembly [
        <!ELEMENT assembly (id|includeBaseDirectory|baseDirectory|formats|fileSets|dependencySets)*>
        <!ELEMENT id (#PCDATA)>
        <!ELEMENT includeBaseDirectory (#PCDATA)>
        <!ELEMENT baseDirectory (#PCDATA)>
        <!ELEMENT formats (format)*>
        <!ELEMENT format (#PCDATA)>
        <!ELEMENT fileSets (fileSet)*>
        <!ELEMENT fileSet (directory|outputDirectory|includes)*>
        <!ELEMENT directory (#PCDATA)>
        <!ELEMENT outputDirectory (#PCDATA)>
        <!ELEMENT includes (include)*>
        <!ELEMENT include (#PCDATA)>
        <!ELEMENT dependencySets (dependencySet)*>
        <!ELEMENT dependencySet (outputDirectory|includes)*>
        ]>
<assembly>
    <id>bin</id>
    <includeBaseDirectory>true</includeBaseDirectory>
    <baseDirectory>${archieve.name}-${version}</baseDirectory>
    <formats>
        <format>tar.gz</format>
        <format>zip</format>
    </formats>

    <fileSets>
        <!-- ********************** copy axis2 distribution dependencies ********************** -->
        <fileSet>
            <directory>target/axis2-${used.axis2.release}/WEB-INF/lib</directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
            <excludes>
                <exclude>commons-logging*.jar</exclude>
                <exclude>xom*.jar</exclude>
                <exclude>xercesImpl*.jar</exclude>
                <exclude>icu4j*.jar</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>target/axis2-${used.axis2.release}/WEB-INF/</directory>
            <outputDirectory>repository</outputDirectory>
            <includes>
                <include>services/*</include>
                <include>modules/*</include>
            </includes>
        </fileSet>

        <!-- ********************** copy release notes files ********************** -->
        <fileSet>
            <directory>../../../</directory>
            <outputDirectory>.</outputDirectory>
            <includes>
                <include>RELEASE_NOTES</include>
            </includes>
        </fileSet>
        <!-- ********************** copy licenses, readme etc. ********************** -->
        <fileSet>
            <directory>src/main/resources/</directory>
            <outputDirectory>.</outputDirectory>
            <includes>
                <include>LICENSE</include>
                <include>NOTICE</include>
                <include>README</include>
                <include>INSTALL</include>
            </includes>
        </fileSet>

        <!-- ********************** copy database scripts ********************** -->
        <fileSet>
            <directory>../../ws-messenger/messagebroker/src/main/resources/database_scripts
            </directory>
            <outputDirectory>bin/database_scripts
            </outputDirectory>
            <includes>
                <include>*sql*</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../../ws-messenger/messagebox/src/main/resources/database_scripts
            </directory>
            <outputDirectory>bin/database_scripts
            </outputDirectory>
            <includes>
                <include>*sql*</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../../registry/airavata-jpa-registry/src/main/resources
            </directory>
            <outputDirectory>bin/database_scripts
            </outputDirectory>
            <includes>
                <include>*sql*</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../../rest/webapp/src/main/resources
            </directory>
            <outputDirectory>bin
            </outputDirectory>
            <includes>
                <include>authenticators.xml</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>src/main/resources/bin</directory>
            <outputDirectory>bin</outputDirectory>
            <fileMode>777</fileMode>
            <includes>
                <include>*.sh</include>
                <include>*.bat</include>
                <include>logo.txt</include>
                <include>startNetworkServer</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>src/main/resources/conf</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>airavata-server.properties</include>
                <include>registry.properties</include>
                <include>log4j.properties</include>
                <include>host.xml</include>
                <include>persistence.xml</include>
                <include>provenance.sql</include>
                <include>gfac-config.xml</include>
            </includes>
        </fileSet>

        <!-- ********************** Copy Axis2 startup scripts to stand alone server ********************** -->
        <fileSet>
            <directory>src/main/resources/axis2-standalone-bin
            </directory>
            <outputDirectory>bin</outputDirectory>
            <fileMode>777</fileMode>
            <includes>
                <include>*.sh</include>
                <include>*.bat</include>
            </includes>
        </fileSet>

        <!--fileSet> <directory>../../samples/simple-math-service/target</directory> <outputDirectory>standalone-server/repository/services</outputDirectory> 
            <includes> <include>*.aar</include> </includes> </fileSet -->
        <fileSet>
            <directory>../../../samples/complex-math-service/target</directory>
            <outputDirectory>repository/services
            </outputDirectory>
            <includes>
                <include>*.aar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../../../samples/levenshtein-distance-service/target
            </directory>
            <outputDirectory>repository/services</outputDirectory>
            <includes>
                <include>*.aar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../../xbaya-gui/src/test/resources/</directory>
            <outputDirectory>samples/workflows</outputDirectory>
            <includes>
                <include>*.xwf</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>../../../samples</directory>
            <outputDirectory>samples</outputDirectory>
            <includes>
                <include>*.sh</include>
                <include>*.bat</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>src/main/resources/conf</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>**/*</include>
            </includes>
        </fileSet>
    </fileSets>

    <dependencySets>
        <dependencySet>
            <outputDirectory>lib</outputDirectory>
            <outputFileNameMapping>${artifact.artifactId}.${artifact.extension}</outputFileNameMapping>
            <includes>
                <include>org.apache.derby:derby:jar</include>
                <include>org.apache.derby:derbytools:jar</include>
                <include>org.apache.derby:derbynet:jar</include>
                <include>org.apache.derby:derbyclient:jar</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>org.slf4j:slf4j-api:jar</include>
                <include>org.slf4j:slf4j-jcl:jar</include>
                <include>org.slf4j:slf4j-log4j12:jar</include>
                <include>javax.jcr:jcr:jar</include>
                <include>commons-collections:commons-collections</include>
                <include>commons-configuration:commons-configuration</include>
                <include>commons-lang:commons-lang</include>
                <include>org.ogce:xpp3:jar</include>
                <include>org.ogce:xpp5:jar</include>
                <include>org.ogce:xsul:jar</include>
                <include>org.ogce:xsul5:jar</include>
                <include>org.ogce:gpel-client:jar</include>
                <include>org.ogce:atomixmiser:jar</include>
                <include>org.ogce:yfilter:jar</include>
                <include>org.python:jython:jar</include>
                <include>org.jglobus:jglobus-all</include>
                <include>org.apache.xmlbeans:xmlbeans</include>
                <include>com.amazonaws:aws-java-sdk</include>
                <include>net.java.dev.jets3t:jets3t</include>
                <include>org.apache.airavata:airavata-registry-api</include>
                <include>org.apache.airavata:airavata-workflow-execution-context</include>
                <include>org.apache.airavata:airavata-workflow-tracking</include>
                <include>org.apache.airavata:airavata-gfac-core</include>
                <include>org.apache.airavata:airavata-credential-store</include>
                <include>org.apache.airavata:airavata-messenger-client</include>
                <include>org.apache.airavata:airavata-messenger-commons</include>
                <include>org.apache.airavata:airavata-gfac-schema-utils</include>
                <include>org.apache.airavata:airavata-common-utils</include>
                <include>org.apache.airavata:airavata-workflow-model-core:jar</include>
                <include>org.apache.airavata:airavata-workflow-model-component:jar</include>
                <include>org.apache.airavata:airavata-message-monitor:jar</include>
                <include>org.apache.airavata:airavata-client-api:jar</include>
                <include>org.apache.airavata:airavata-jpa-registry:jar</include>
                <include>org.apache.airavata:airavata-rest-mappings:jar</include>
                <include>org.apache.airavata:airavata-rest-client:jar</include>
                <include>org.apache.airavata:airavata-embedded-tomcat:jar</include>
                <include>org.apache.airavata:airavata-rest-mappings</include>
                <include>org.apache.airavata:airavata-rest-services</include>
                <include>org.apache.airavata:airavata-security</include>
                <include>org.apache.airavata:json</include>
                <include>org.apache.openjpa:openjpa-all:jar</include>
                <include>com.sun.jersey:jersey-client:jar</include>
                <include>com.sun.jersey:jersey-core:jar</include>
                <include>org.bouncycastle:bcprov-jdk16</include>
                <include>org.bouncycastle:bcmail-jdk16</include>
                <include>org.apache.tomcat:tomcat-jasper</include>
                <include>org.apache.tomcat:tomcat-jasper-el</include>
                <include>org.apache.tomcat:tomcat-jsp-api</include>
                <include>org.apache.tomcat.embed:tomcat-embed-core</include>
                <include>org.apache.tomcat.embed:tomcat-embed-jasper</include>
                <include>org.apache.tomcat.embed:tomcat-embed-logging-juli</include>
                <include>javax.servlet:javax.servlet-api</include>
                <include>org.apache.shiro:shiro-core</include>
                <include>com.sun.jersey:jersey-servlet</include>
                <include>com.sun.jersey:jersey-json</include>
                <include>com.sun.jersey.contribs:jersey-multipart</include>
                <include>com.sun.jersey:jersey-server</include>
                <include>com.sun.jersey:jersey-client</include>
                <include>org.codehaus.jackson:jackson-jaxrs</include>
                <include>org.codehaus.jackson:jackson-core-asl</include>
                <include>org.codehaus.jackson:jackson-mapper-asl</include>
                <include>org.codehaus.jackson:jackson-xc</include>
                <include>xerces:xercesImpl:jar:2.9.1</include>
                <include>com.ibm.icu:icu4j</include>
                <include>com.google.guava:guava</include>
                <include>org.apache.hadoop:hadoop-core</include>
                <include>org.apache.hadoop:hadoop-client</include>
                <include>org.apache.whirr:whirr-hadoop</include>
                <include>org.hamcrest:hamcrest-all</include>
                <include>org.mockito:mockito-all</include>
                <include>com.jcraft:jsch</include>
                <include>net.sf.jopt-simple:jopt-simple</include>
                <include>net.schmizz:sshj</include>
                <include>j2ssh:j2ssh-core</include>
                <include>j2ssh:j2ssh-common</include>
                <include>org.apache.httpcomponents:httpcore:jar:4.1</include>
                <include>org.apache.httpcomponents:httpclient:jar:4.1</include>
                <include>de.odysseus.staxon:staxon:jar:1.2</include>
                <include>de.odysseus.staxon:staxon-jackson:jar:1.2</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <outputDirectory>repository/services</outputDirectory>
            <includes>
                <include>org.apache.airavata:airavata-message-box:jar</include>
                <include>org.apache.airavata:airavata-message-broker:jar</include>
                <include>org.apache.airavata:airavata-xbaya-gui:jar</include>
                <include>org.apache.airavata:airavata-registry-service:jar</include>
            </includes>
        </dependencySet>
    </dependencySets>

</assembly>
