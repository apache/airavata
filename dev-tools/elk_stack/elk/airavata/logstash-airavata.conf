input {
  kafka {
    topics => ["test_all_logs","test_apiserver_logs","test_orchestrator_logs","test_credentialstore_logs","test_gfac_logs","local_api-orch_logs","__consumer_offsets,local_gfac_logs"]
    bootstrap_servers => "172.17.0.3:9092"
    auto_offset_reset => "earliest"
  }
}
 
filter {

  json {
    source => "message"
    target => "doc"
  }
  mutate { add_field => { "level" => "%{[doc][level]}" } }
  mutate { add_field => { "logger" => "%{[doc][loggerName]}" } } 
}
output {
  stdout { codec => rubydebug }
  elasticsearch {
    hosts => ["localhost:9200"]
    index => ["logstash-airavata-logs-%{+YYYY.MM.dd}"]
  }
}
